(function(){var e,t=1,n=!1,a={attr:[],class:[],for:[],html:[],if:[],on:[]},i=function(e,t){var n,a=-1!==e.indexOf("["),r=-1!==e.indexOf(".");if(a||r||(n=window[e]),a){var l=function(e){return e=e.replace(/\[([^\[\]]*)\]/g,function(e,t){return"."+i(t)}),/\[[^\[\]]*\]/.test(e)?l(e):e};e=l(e),r||(r=!0)}return r&&e.split(".").forEach(function(e,a){if(a)n="object"==typeof n&&n[e]?n[e]:"";else{var i=window.directives.baseReference;t&&Object.keys(t).forEach(function(e){i[e]=t[e]}),n=i[e]}}),n},r=function(e,t){var n;["attr","class","for","html","if","on"].forEach(function(t){if(a[t].length)if(e===document.body)"on"===t&&a.on.forEach(function(e){e.element.removeEventListener(e.eventName,e.listener)}),a[t].length=0;else if(a[t].map(function(t){return!e.contains(t.element)&&t}),-1!==a[t].indexOf(!1))for(;-1!==(n=a[t].indexOf(!1));)a[t].splice(n,1)})},l=function(s,m,f){var c=!1,o=!1;t||(t=1),r(s),["if","for","html","attr","class","on"].some(function(e){if(!s.hasAttribute("sd-"+e))return!1;var t;t=1!==["attr"].indexOf(e)&&-1!==s.getAttribute("sd-attr").indexOf(";")?s.getAttribute("sd-"+e).split(";"):[s.getAttribute("sd-"+e)],t.forEach(function(t){var n={element:s};if(-1!==["if","html"].indexOf(e))n.reference=t;else{switch(t=t.split(":"),e){case"attr":n.attributeName=t[0];break;case"class":n.className=t[0];break;case"for":n.itemName=t[0];break;case"on":n.eventName=t[0]}n.reference=t[1]}if(m)if(n.itemNames||(n.itemNames=[]),n.itemNames.push(m.itemName),Array.isArray(m.value))n[m.itemName]={key:f,index:f,item:m.value[f],value:m.value[f]};else{var r=Object.keys(m.value)[f];n[m.itemName]={key:r,index:f,item:m.value[r],value:m.value[r]}}if("on"===e&&(n.listener=function(e){var t={},a={element:s,event:e};m?(t[m.itemName]={key:n[m.itemName].key,index:n[m.itemName].index,item:n[m.itemName].item,value:n[m.itemName].value},a[m.itemName]=t[m.itemName],i(n.reference,t).call(a)):i(n.reference).call(a)},s.addEventListener(n.eventName,n.listener)),a[e].push(n),"if"===e){if(m){var l={};l[m.itemName]={key:n[m.itemName].key,index:n[m.itemName].index,item:n[m.itemName].item,value:n[m.itemName].value},n.value=i(n.reference,l)}else n.value=i(n.reference);if(!n.value)return s.style.display="none",c=!0,!0;s.style.display=null}else"for"===e&&(o=!0)})}),c||(o||(t+=s.children.length,Array.from(s.children).forEach(function(e){l(e)})),t-=1,t||n||e())};e=function(){var t;n=!0,["if","for","attr","class","html"].forEach(function(e){if(a[e].forEach(function(t,n){if(t.element.parentElement){var s;if(t.itemNames){var m={},f={};t.itemNames.forEach(function(e){m[e]={key:t[e].key,index:t[e].index,item:t[e].item,value:t[e].value},f[e]=m[e]}),s=i(t.reference,m),"function"==typeof s&&(s=s.call(f))}else s=i(t.reference),"function"==typeof s&&(s=s());if(-1!==["if","class"].indexOf(e)&&"boolean"!=typeof s&&(s=!!s),!t.value||t.value!==s)switch("for"===e&&(s=t.innerHTML.repeat(Array.isArray(t.value)?t.value.length:Object.keys(t.value).length)),t.value=s,e){case"if":s?(t.element.style.display=null,l(t.element)):(t.element.style.display="none",r(t.element,"if"));break;case"for":case"html":Array.from(t.element.children).forEach(function(e){r(e)}),t.element.innerHTML=s,Array.from(t.element.children).forEach(function(n,a){"for"===e?l(n,t,a):l(n)});break;case"attr":void 0===s?t.element.hasAttribute(t.attributeName)&&t.element.removeAttribute(t.attributeName):t.element.setAttribute(t.attributeName,s);break;case"class":s?t.element.classList.contains(t.className)||t.element.classList.add(t.className):t.element.classList.contains(t.className)&&t.element.classList.remove(t.className)}}else a[e][n]=!1}),-1!==a[e].indexOf(!1))for(;-1!==(t=a[e].indexOf(!1));)a[e].splice(t,1)}),setTimeout(e,window.directives.refreshRate)},window.directives={baseReference:window,refreshRate:100,register:l,unregister:r},"loading"!=document.readyState?l(document.body):document.addEventListener("DOMContentLoaded",function(){l(document.body)})})();