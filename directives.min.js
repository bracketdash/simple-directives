(function(){var e,t=1,n=!1,a={attr:[],class:[],for:[],html:[],if:[],on:[]},i=function(e,t){var n,a=-1!==e.indexOf("["),r=-1!==e.indexOf("."),s=!1;if(0===e.indexOf("!")&&(e=e.substring(1),s=!0),!a&&!r){var l=window.directives.baseReference;t&&Object.keys(t).forEach(function(e){l[e]=t[e]}),n=l[e]}if(a){var m=function(e){return e=e.replace(/\[([^\[\]]*)\]/g,function(e,t){return"."+i(t)}),/\[[^\[\]]*\]/.test(e)?m(e):e};e=m(e),r||(r=!0)}return r&&e.split(".").forEach(function(e,a){if(a)n="object"==typeof n&&n[e]?n[e]:"";else{var i=window.directives.baseReference;t&&Object.keys(t).forEach(function(e){i[e]=t[e]}),n=i[e]}}),s?!n:n},r=function(e,t){var n;["attr","class","for","html","if","on"].forEach(function(t){if(a[t].length)if(e===document.body)"on"===t&&a.on.forEach(function(e){-1!==e.eventName.indexOf(",")?e.eventName.split(",").forEach(function(t){e.element.removeEventListener(t,e.listener)}):e.element.removeEventListener(e.eventName,e.listener)}),a[t].length=0;else if(a[t].map(function(n){return e.contains(n.element)?("on"===t&&(-1!==n.eventName.indexOf(",")?n.eventName.split(",").forEach(function(e){n.element.removeEventListener(e,n.listener)}):n.element.removeEventListener(n.eventName,n.listener)),!1):n}),-1!==a[t].indexOf(!1))for(;-1!==(n=a[t].indexOf(!1));)a[t].splice(n,1)})},s=function(l,m,c){var f=!1,o=!1;t||(t=1),r(l),["if","for","html","attr","class","on"].some(function(e){if(!l.hasAttribute("sd-"+e))return!1;var t;t=1!==["attr"].indexOf(e)&&-1!==l.getAttribute("sd-attr").indexOf(";")?l.getAttribute("sd-"+e).split(";"):[l.getAttribute("sd-"+e)],t.forEach(function(t){var n={element:l},r=t.split(":");if(-1!==["if","html"].indexOf(e))n.reference=r[0],r.length>1&&(n.refArgs=r.slice(1));else{switch(e){case"attr":n.attributeName=r[0];break;case"class":n.className=r[0];break;case"for":n.itemName=r[0];break;case"on":n.eventName=r[0]}n.reference=r[1],r.length>2&&(n.refArgs=r.slice(2))}if(m)if(n.itemNames||(n.itemNames=[]),n.itemNames.push(m.itemName),Array.isArray(m.value))n[m.itemName]={key:c,index:c,item:m.value[c],value:m.value[c]};else{var s=Object.keys(m.value)[c];n[m.itemName]={key:s,index:c,item:m.value[s],value:m.value[s]}}if("on"===e&&(n.listener=function(e){var t={},a={element:l,event:e};m?(t[m.itemName]={key:n[m.itemName].key,index:n[m.itemName].index,item:n[m.itemName].item,value:n[m.itemName].value},a[m.itemName]=t[m.itemName],i(n.reference,t).apply(a,n.refArgs)):i(n.reference).apply(a,n.refArgs)},-1!==n.eventName.indexOf(",")?n.eventName.split(",").forEach(function(e){n.element.addEventListener(e,n.listener)}):n.element.addEventListener(n.eventName,n.listener)),a[e].push(n),"if"===e){if(m){var u={};u[m.itemName]={key:n[m.itemName].key,index:n[m.itemName].index,item:n[m.itemName].item,value:n[m.itemName].value},n.value=i(n.reference,u)}else n.value=i(n.reference);if(!n.value)return l.style.display="none",f=!0,!0;l.style.display=null}else"for"===e&&(o=!0)})}),f||(o||(t+=l.children.length,Array.from(l.children).forEach(function(e){s(e)})),t-=1,t||n||e())};e=function(){var t;n=!0,["if","for","attr","class","html"].forEach(function(e){if(a[e].forEach(function(t,n){if(t.element.parentElement){var l,m={element:t.element};switch(e){case"attr":m.attributeName=t.attributeName;break;case"class":m.className=t.className;break;case"for":m.itemName=t.itemName;break;case"on":m.eventName=t.eventName}if(t.itemNames){var c={};t.itemNames.forEach(function(e){c[e]={key:t[e].key,index:t[e].index,item:t[e].item,value:t[e].value},m[e]=c[e]}),l=i(t.reference,c),"function"==typeof l&&(l=l.apply(m,t.refArgs))}else l=i(t.reference),"function"==typeof l&&(l=l.apply(m,t.refArgs));if(-1!==["if","class"].indexOf(e)&&"boolean"!=typeof l&&(l=!!l),!t.value||t.value!==l)switch("for"===e&&(l=t.innerHTML.repeat(Array.isArray(t.value)?t.value.length:Object.keys(t.value).length)),t.value=l,e){case"if":l?(t.element.style.display=null,s(t.element)):(t.element.style.display="none",r(t.element,"if"));break;case"for":case"html":Array.from(t.element.children).forEach(function(e){r(e)}),t.element.innerHTML=l,Array.from(t.element.children).forEach(function(n,a){"for"===e?s(n,t,a):s(n)});break;case"attr":-1!==t.attributeName.indexOf(",")?t.attributeName.split(",").forEach(function(e){void 0===l?t.element.hasAttribute(e)&&t.element.removeAttribute(e):t.element.setAttribute(e,l)}):void 0===l?t.element.hasAttribute(t.attributeName)&&t.element.removeAttribute(t.attributeName):t.element.setAttribute(t.attributeName,l);break;case"class":-1!==t.className.indexOf(",")?t.className.split(",").forEach(function(e){l?t.element.classList.contains(e)||t.element.classList.add(e):t.element.classList.contains(e)&&t.element.classList.remove(e)}):l?t.element.classList.contains(t.className)||t.element.classList.add(t.className):t.element.classList.contains(t.className)&&t.element.classList.remove(t.className)}}else a[e][n]=!1}),-1!==a[e].indexOf(!1))for(;-1!==(t=a[e].indexOf(!1));)a[e].splice(t,1)}),setTimeout(e,window.directives.refreshRate)},window.directives={baseReference:window,refreshRate:100,register:s,unregister:r},"loading"!=document.readyState?setTimeout(function(){s(document.body)}):document.addEventListener("DOMContentLoaded",function(){setTimeout(function(){s(document.body)})})})();