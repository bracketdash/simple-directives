(function(){function t(r,a,i){let s,c,o,f,u,l,g,d=!1;a||e(r),["if","attr","class","for","html","on","rdo"].some(function(t){if(c=`sd-${t}`,s=r.getAttribute(c),!s)return!1;if(o=s.replace(/\s+/,"").split(";"),p(t).oneOf(["attr","class","for","on"])?o.forEach(function(e){f=e.split(":"),u=f.shift().split(","),l=f.join(":").split(","),n(r,t,l,u,i)}):g=n(r,t,[o[0]],[],i),"if"===t){if(!g)return r.style.display="none",d=!0,!0}else"for"===t&&(d=!0)}),d||Array.from(r.children).forEach(function(e){t(e,!0)})}function e(t){d=d.map(function(e){let{element:n,type:r,preReferences:a,listener:i,action:s}=e;return n===t||t.contains(n)?("on"===r?a.forEach(function(t){n.removeEventListener(t,i)}):(m=m.map(function(t){return t.action===s?null:t}),g(m)),null):e}),g(d)}function n(t,e,n,a,i){const c={attr:"attributeName",class:"className",for:"itemName",on:"eventName"};let o={element:t,type:e,references:n},u=!1,p=!0;return i&&Object.assign(o,i),a&&(o.preReferences=a,c[e]&&(o[c[e]]=a)),"on"===e?r(o):("for"===e?o.originalHTML=t.innerHTML:"if"===e?p=!!l(f(n[0],o)):"rdo"===e&&d.some(function(e){"rdo"===e.type&&e.element===t&&(u=!0)}),s(o)),u||d.push(o),p}function r(t){let e=[];t.references.forEach(function(n){e.push(a(t,n))}),t.listener={handleEvent:function(t){e.forEach(function(e){e(t)})}},t.preReferences.forEach(function(e){t.element.addEventListener(e,t.listener)})}function a(t,e){let n;if("$update"===e)return i(t);if(-1!==e.indexOf("=")){const r=e.split("="),a=f(r[0],t),i=f(r[1],t);n=i.bang?function(e){"function"==typeof i.parent[i.target]?a.parent[a.target]=!i.parent[i.target].apply(Object.assign({event:e},t),i.args.map(function(e){let n=f(e,t);return n.parent[n.target]})):a.parent[a.target]=!i.parent[i.target]}:function(e){"function"==typeof i.parent[i.target]?a.parent[a.target]=i.parent[i.target].apply(Object.assign({event:e},t)):a.parent[a.target]=i.parent[i.target]}}else{const r=f(e,t);n=function(e){r.parent[r.target].apply(Object.assign({event:e},t),r.args.map(function(e){let n=f(e,t);return n.parent[n.target]}))}}return n}function i(t){let e,n,{element:r}=t;if(r.hasAttribute("sd-attr")){let a,i="value";e=r.getAttribute("sd-attr"),"input"===r.tagName&&p(r.getAttribute("type")).oneOf(["checkbox","radio"])&&(i="checked"),a=e.indexOf(i),-1!==a&&(e=e.substring(a).split(":")[1],a=e.indexOf(";"),-1!==a&&(e=e.substring(0,a)),e=f(e,t),n=function(){e.parent[e.target]=r[i]})}else r.hasAttribute("sd-html")&&r.isContentEditable?(e=f(r.getAttribute("sd-html"),t),n=function(){e.parent[e.target]=r.innerHTML}):r.hasAttribute("sd-rdo")&&(e=f(r.getAttribute("sd-rdo"),t),n=function(){const t=Array.from(document.getElementsByName(r.getAttribute("name")));let n;t.some(function(t){if(t.checked)return n=t.value,!0}),e.parent[e.target]=n});return n}function s(t){const e=t.references[0].split(":").slice(1),n=o(t,e);t.action=n,m.push({action:n,directive:t,lastValue:!1}),h||(c(),h=!0)}function c(){m.forEach(function(t){const{action:e,directive:n,lastValue:r}=t,a=n.references[0].split(":"),i=a.shift(),s=l(f(i,n));s!==r&&(t.lastValue=s,e(s))}),setTimeout(c,200)}function o(n,r){const{type:a,element:i,preReferences:s}=n;let c;switch(a){case"if":c=function(n){n?(i.style.display=null,t(i)):(i.style.display="none",e(i))};break;case"for":case"html":c=function(t){i.children.length&&Array.from(i.children).forEach(function(t){e(t)}),i.innerHTML=t,i.children.length&&Array.from(i.children).forEach(function(t){e(t)})};break;case"attr":c=function(t){s.forEach(function(e){void 0===t?i.hasAttribute(e)&&i.removeAttribute(e):i.setAttribute(e,t)})};break;case"rdo":c=function(t){const e=Array.from(document.getElementsByName(i.getAttribute("name")));e.forEach(function(e){e.value===t?e.checked=!0:e.checked=!1})};break;case"class":c=function(t){if(s.length>1)s.forEach(function(e){t?i.classList.contains(e)||i.classList.add(e):i.classList.contains(e)&&i.classList.remove(e)});else{const e=s[0];t?i.classList.contains(e)||i.classList.add(e):i.classList.contains(e)&&i.classList.remove(e)}}}return function(t){i.parentElement?("function"==typeof t&&(r=r.map(function(t){const e=f(t,n);return e.parent[e.target]}),t=t.apply(n,r)),c(t)):e(i)}}function f(t,e){const n={parent:{value:t},scope:e,target:"value"},r=-1!==t.indexOf("[");let a,i,s,c=t.split(":"),o=!1;if(t=c.shift(),a=-1!==t.indexOf("."),/[=<!>]/.test(t)){if(0!==t.indexOf("!")||/[=<!>]/.test(t.substring(1))){const r=t.match(/([=<!>]{2,3})/)[0];return p(r).oneOf(["==","===","!=","!==","<",">","<=",">="])?u(r,t,e):n}t=t.substring(1),o=!0}if(/[^a-z0-9.[\]$_]/i.test(t))return n;if(i=Object.assign({},window.simpleDirectives.root,e),r||a){if(r){for(;/\[[^\[\]]*\]/.test(t);)t=t.replace(/\[([^\[\]]*)\]/g,function(t,n){const r=f(n,e);return"."+r.parent[r.target]});a||(a=!0)}if(a){const e=t.split(".");e.some(function(n,r){if(r===e.length-1)s=n;else{if("object"!=typeof i||!i.hasOwnProperty(n))return i={value:t},s="value",!0;i=i[n]}})}}else{if(!i.hasOwnProperty(t))return n;s=t}return{args:c,bang:o,parent:i,scope:e,target:s}}function u(t,e,n){const r=e.split(t),a=l(f(r[0],n)),i=l(f(r[1],n));let s;switch(t){case"==":s=a==i;break;case"===":s=a===i;break;case"!=":case"!==":s=a!=i;break;case"<":s=a<i;break;case">":s=a>i;break;case"<=":s=a<=i;break;case">=":s=a>=i}return{parent:{value:s},scope:n,target:"value"}}function l({args:t,bang:e,parent:n,scope:r,target:a}){let i=n[a];return"function"==typeof i&&(i=i.apply(r,t.map(function(t){const e=f(t,r);return e.parent[e.target]}))),e?!i:i}function p(t){return{oneOf:function(e){return-1!==e.indexOf(t)}}}function g(t){let e;for(;-1!==(e=t.indexOf(null));)t.splice(e,1)}let d=[],m=[],h=!1;window.simpleDirectives={is:p,register:t,registry:d,removeNulls:g,root:window,unregister:e,watchers:m}})();