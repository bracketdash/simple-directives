(function(){function e(i,r,s){let c,o,a,l,f,u,p,d=!1;r||t(i),["if","attr","class","for","html","on","rdo"].some(function(e){if(o=`sd-${e}`,c=i.getAttribute(o),!c)return!1;if(a=c.replace(/\s+/,"").split(";"),h(e).oneOf(["attr","class","for","on"])?a.forEach(function(t){l=t.split(":"),f=l.shift().split(","),u=l.join(":").split(","),n(i,e,u,f,s)}):p=n(i,e,[a[0]],[],s),"if"===e){if(!p)return i.style.display="none",d=!0,!0}else"for"===e&&(d=!0)}),d||Array.from(i.children).forEach(function(t){e(t,!0,s)})}function t(e,t){window.simpleDirectives.registry=window.simpleDirectives.registry.map(function(n){let{element:i,type:r,preReferences:s,listener:c,action:o}=n;return t&&"if"===r&&i===e?n:i===e||e.contains(i)?("on"===r?s.forEach(function(e){i.removeEventListener(e,c)}):(window.simpleDirectives.watchers=window.simpleDirectives.watchers.map(function(e){return e.action===o?null:e}),d(window.simpleDirectives.watchers)),null):n}),d(window.simpleDirectives.registry)}function n(e,t,n,r,s){const o={attr:"attributeName",class:"className",for:"itemName",on:"eventName"};let a={element:e,type:t,references:n},f=!1,p=!0;return s&&Object.assign(a,s),r&&(a.preReferences=r,o[t]&&(a[o[t]]=r)),"on"===t?i(a):("for"===t?a.originalHTML=e.innerHTML:"if"===t?p=!!u(l(n[0],a)):"rdo"===t&&window.simpleDirectives.registry.some(function(t){"rdo"===t.type&&t.element===e&&(f=!0)}),c(a)),f||window.simpleDirectives.registry.push(a),p}function i(e){let t=[];e.references.forEach(function(n){t.push(r(e,n))}),e.listener={handleEvent:function(e){t.forEach(function(t){t(e)})}},e.preReferences.forEach(function(t){e.element.addEventListener(t,e.listener)})}function r(e,t){let n;if("$update"===t)return s(e);if(-1!==t.indexOf("=")){const i=t.split("="),r=l(i[0],e),s=l(i[1],e);n=function(e){r.parent[r.target]=u(s)}}else{const i=l(t,e);n=function(t){i.parent[i.target].apply(Object.assign({event:t},e),i.args.map(function(t){let n=l(t,e);return n.parent[n.target]}))}}return n}function s(e){let t,n,{element:i}=e;if(i.hasAttribute("sd-attr")){let r,s="value";t=i.getAttribute("sd-attr"),"input"===i.tagName&&h(i.getAttribute("type")).oneOf(["checkbox","radio"])&&(s="checked"),r=t.indexOf(s),-1!==r&&(t=t.substring(r).split(":")[1],r=t.indexOf(";"),-1!==r&&(t=t.substring(0,r)),t=l(t,e),n=function(){t.parent[t.target]=i[s]})}else i.hasAttribute("sd-html")&&i.isContentEditable?(t=l(i.getAttribute("sd-html"),e),n=function(){t.parent[t.target]=i.innerHTML}):i.hasAttribute("sd-rdo")&&(t=l(i.getAttribute("sd-rdo"),e),n=function(){const e=Array.from(document.getElementsByName(i.getAttribute("name")));let n;e.some(function(e){if(e.checked)return n=e.value,!0}),t.parent[t.target]=n});return n}function c(e){const t=e.references[0].split(":").slice(1),n=a(e,t),i={action:n,directive:e,lastValue:!1};e.action=n,window.simpleDirectives.watchers.push(i),w?h(e.type).oneOf(["class","html"])&&(i.lastValue=u(l(e.references[0],e)),n(i.lastValue)):(o(),w=!0)}function o(){window.simpleDirectives.watchers.forEach(function(e,t){const{action:n,directive:i,lastValue:r}=e,s=u(l(i.references[0],i));let c;if("object"==typeof s){try{c=JSON.stringify(s)}catch(e){console.log(e)}c&&c!==r&&(window.simpleDirectives.watchers[t].lastValue=c,n(s))}else s!==r&&(n(s),window.simpleDirectives.watchers[t].lastValue=s)}),setTimeout(o,200)}function a(n,i){const{type:r,element:s,preReferences:c}=n;let o;switch(r){case"if":o=function(n){n?(s.style.display=null,e(s)):(s.style.display="none",t(s,!0))};break;case"for":o=function(i){const r=s.children.length,c=i.length-r,o=n.originalHTML.repeat(i.length);if(r&&Array.from(s.children).forEach(function(e){t(e)}),s.style.width=getComputedStyle(s).width,s.style.height=getComputedStyle(s).height,s.style.overflow="hidden",c<0){let e=Math.abs(c);for(;e>0;)s.removeChild(s.lastChild),e-=1}else c>0?s.innerHTML+=n.originalHTML.repeat(c):s.innerHTML===o&&(s.innerHTML=o);s.style.width=null,s.style.height=null,s.style.overflow=null,Array.from(s.children).some(function(t,r){const s={};s[n.preReferences[0]]=Object.assign({$collection:i,$index:r},i[r]),e(t,!0,s)})};break;case"html":o=function(n){s.children.length&&Array.from(s.children).forEach(function(e){t(e)}),s.innerHTML=n,s.children.length&&Array.from(s.children).forEach(function(t){e(t,!0)})};break;case"attr":o=function(e){c.forEach(function(t){void 0===e?s.hasAttribute(t)&&s.removeAttribute(t):s.setAttribute(t,e)})};break;case"rdo":o=function(e){const t=Array.from(document.getElementsByName(s.getAttribute("name")));t.forEach(function(t){t.value===e?t.checked=!0:t.checked=!1})};break;case"class":o=function(e){c.forEach(function(t){e?s.classList.contains(t)||s.classList.add(t):s.classList.contains(t)&&s.classList.remove(t)})}}return function(e){s.parentElement?("function"==typeof e&&(i=i.map(function(e){const t=l(e,n);return t.parent[t.target]}),e=e.apply(n,i)),o(e)):t(s)}}function l(e,t){const n={parent:{value:e},scope:t,target:"value"},i=-1!==e.indexOf("[");let r,s,c,o=e.split(":"),a=!1;if(e=o.shift(),r=-1!==e.indexOf("."),/[=<!>]/.test(e)){if(0!==e.indexOf("!")||/[=<!>]/.test(e.substring(1))){const i=e.match(/([=<!>]{1,3})/)[0];return h(i).oneOf(["==","===","!=","!==","<",">","<=",">="])?f(i,e,t):n}e=e.substring(1),a=!0}if(/[^a-z0-9.[\]$_]/i.test(e))return n;if(s=Object.assign({},window.simpleDirectives.root,t),i||r){if(i){for(;/\[[^\[\]]*\]/.test(e);)e=e.replace(/\[([^\[\]]*)\]/g,function(e,n){const i=l(n,t);return"."+i.parent[i.target]});r||(r=!0)}if(r){const t=e.split(".");t.some(function(n,i){if(i===t.length-1)c=n;else{if("object"!=typeof s||!s.hasOwnProperty(n))return s={value:e},c="value",!0;s=s[n]}})}}else{if(!s.hasOwnProperty(e))return n;c=e}return{args:o,bang:a,parent:s,scope:t,target:c}}function f(e,t,n){const i=t.split(e),r=u(l(i[0],n)),s=u(l(i[1],n));let c;switch(e){case"==":c=r==s;break;case"===":c=r===s;break;case"!=":case"!==":c=r!=s;break;case"<":c=r<s;break;case">":c=r>s;break;case"<=":c=r<=s;break;case">=":c=r>=s}return{parent:{value:c},scope:n,target:"value"}}function u({args:e,bang:t,parent:n,scope:i,target:r}){let s=n[r];return"function"==typeof s&&(s=s.apply(i,e.map(function(e){const t=l(e,i);return t.parent[t.target]}))),t?!s:s}function p(e){const t={watchers:[],directives:[]};return window.simpleDirectives.registry.forEach(function(n){let{element:i,type:r,action:s}=n;i===e&&(t.directives.push(n),"on"!==r&&window.simpleDirectives.watchers.forEach(function(e){e.action===s&&t.watchers.push(e)}))}),t}function h(e){return{oneOf:function(t){return-1!==t.indexOf(e)}}}function d(e){let t;for(;-1!==(t=e.indexOf(null));)e.splice(t,1)}let m=[],g=[],w=!1;window.simpleDirectives={getElementDirectiveData:p,is:h,register:e,registry:m,removeNulls:d,root:window,unregister:t,watchers:g}})();