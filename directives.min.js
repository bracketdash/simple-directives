(function(){var e={attr:[],class:[],for:[],html:[],if:[],on:[]},t=function(e){return e=e.replace(/\[([^\[\]]*)\]/g,function(e,t){return"."+a(t)}),/\[[^\[\]]*\]/.test(e)?t(e):e},n=function(e,t){var n=window.directives.baseReference;return e&&(n=Object.assign({},n),Object.keys(e).forEach(function(t){n[t]=e[t]})),n[t]},a=function(e,a){var i,r=-1!==e.indexOf("["),s=-1!==e.indexOf("."),l=!1;return 0===e.indexOf("!")&&(e=e.substring(1),l=!0),r||s?(r&&(e=t(e),s||(s=!0)),s&&e.split(".").forEach(function(e,t){i=t?"object"==typeof i&&i[e]?i[e]:"":n(a,e)})):i=n(a,e),l?!i:i},i={attr:"attributeName",class:"className",for:"itemName",on:"eventName"},r=function(t,n,c){var o=!1,u=!1;m||(m=1),l(t),["if","for","html","attr","class","on"].some(function(r){if(!t.hasAttribute("sd-"+r))return!1;var s;s=1!==["attr"].indexOf(r)&&-1!==t.getAttribute("sd-attr").indexOf(";")?t.getAttribute("sd-"+r).split(";"):[t.getAttribute("sd-"+r)],s.forEach(function(s){var l={element:t},m=s.split(":");if(-1!==["if","html"].indexOf(r)?(l.reference=m.shift(),m.length&&(l.refArgs=m)):(l[i[r]]=m.shift(),l.reference=m.shift(),m.length&&(l.refArgs=m)),"for"===r&&(l.originalHTML=t.innerHTML),n)if(l.itemNames||(l.itemNames=[]),l.itemNames.push(n.itemName),Array.isArray(n.value))l[n.itemName]={collection:n.value,key:c,index:c,item:n.value[c],value:n.value[c]};else{var f=Object.keys(n.value)[c];l[n.itemName]={collection:n.value,key:f,index:c,item:n.value[f],value:n.value[f]}}if("on"===r&&(l.listener=function(e){var i={},r={element:t,event:e};n?(i[n.itemName]={key:l[n.itemName].key,index:l[n.itemName].index,item:l[n.itemName].item,value:l[n.itemName].value},r[n.itemName]=i[n.itemName],a(l.reference,i).apply(r,l.refArgs)):a(l.reference).apply(r,l.refArgs)},-1!==l.eventName.indexOf(",")?l.eventName.split(",").forEach(function(e){l.element.addEventListener(e,l.listener)}):l.element.addEventListener(l.eventName,l.listener)),e[r].push(l),"if"===r){if(n){var v={};v[n.itemName]={key:l[n.itemName].key,index:l[n.itemName].index,item:l[n.itemName].item,value:l[n.itemName].value},l.value=a(l.reference,v)}else l.value=a(l.reference);if(!l.value)return t.style.display="none",o=!0,!0;t.style.display=null}else"for"===r&&(u=!0)})}),o||(u||(m+=t.children.length,Array.from(t.children).forEach(function(e){r(e)})),m-=1,m||f||s())},s=function(){var t;f||(f=!0),["if","for","attr","class","html"].forEach(function(n){if(e[n].forEach(function(t,i){if(t.element.parentElement){var s,m={element:t.element};switch(n){case"attr":m.attributeName=t.attributeName;break;case"class":m.className=t.className;break;case"for":m.itemName=t.itemName;break;case"on":m.eventName=t.eventName}if(t.itemNames){var f={};t.itemNames.forEach(function(e){f[e]={key:t[e].key,index:t[e].index,item:t[e].item,value:t[e].value},m[e]=f[e]}),s=a(t.reference,f),"function"==typeof s&&(s=s.apply(m,t.refArgs))}else s=a(t.reference),"function"==typeof s&&(s=s.apply(m,t.refArgs));if(-1!==["if","class"].indexOf(n)&&"boolean"!=typeof s&&(s=!!s),!t.value||t.value!==s)switch("for"===n&&(s=t.originalHTML.repeat(Array.isArray(t.value)?t.value.length:Object.keys(t.value).length)),t.value=s,n){case"if":s?(t.element.style.display=null,r(t.element)):(t.element.style.display="none",l(t.element,"if"));break;case"for":case"html":Array.from(t.element.children).forEach(function(e){l(e)}),t.element.innerHTML=s,Array.from(t.element.children).forEach(function(e,a){"for"===n?r(e,t,a):r(e)});break;case"attr":-1!==t.attributeName.indexOf(",")?t.attributeName.split(",").forEach(function(e){void 0===s?t.element.hasAttribute(e)&&t.element.removeAttribute(e):t.element.setAttribute(e,s)}):void 0===s?t.element.hasAttribute(t.attributeName)&&t.element.removeAttribute(t.attributeName):t.element.setAttribute(t.attributeName,s);break;case"class":-1!==t.className.indexOf(",")?t.className.split(",").forEach(function(e){s?t.element.classList.contains(e)||t.element.classList.add(e):t.element.classList.contains(e)&&t.element.classList.remove(e)}):s?t.element.classList.contains(t.className)||t.element.classList.add(t.className):t.element.classList.contains(t.className)&&t.element.classList.remove(t.className)}}else e[n][i]=!1}),-1!==e[n].indexOf(!1))for(;-1!==(t=e[n].indexOf(!1));)e[n].splice(t,1)}),setTimeout(s,window.directives.refreshRate)},l=function(t,n){var a;["attr","class","for","html","if","on"].forEach(function(n){if(e[n].length)if(t===document.body)"on"===n&&e.on.forEach(function(e){-1!==e.eventName.indexOf(",")?e.eventName.split(",").forEach(function(t){e.element.removeEventListener(t,e.listener)}):e.element.removeEventListener(e.eventName,e.listener)}),e[n].length=0;else if(e[n].map(function(e){return t.contains(e.element)?("on"===n&&(-1!==e.eventName.indexOf(",")?e.eventName.split(",").forEach(function(t){e.element.removeEventListener(t,e.listener)}):e.element.removeEventListener(e.eventName,e.listener)),!1):e}),-1!==e[n].indexOf(!1))for(;-1!==(a=e[n].indexOf(!1));)e[n].splice(a,1)})},m=1,f=!1;window.directives={baseReference:window,refreshRate:100,register:r,unregister:l},"loading"!=document.readyState?setTimeout(function(){r(document.body)}):document.addEventListener("DOMContentLoaded",function(){setTimeout(function(){r(document.body)})})})();