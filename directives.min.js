(function(){function e(r,i,c){let o,s,a,f,u,l,h,d=!1;i||t(r),["if","attr","class","for","html","on","rdo"].some(function(e){if(s=`sd-${e}`,o=r.getAttribute(s),!o)return!1;if(a=o.replace(/\s+/,"").split(";"),p(e).oneOf(["attr","class","for","on"])?a.forEach(function(t){f=t.split(":"),u=f.shift().split(","),l=f.join(":").split(","),n(r,e,l,u,c)}):h=n(r,e,[a[0]],[],c),"if"===e){if(!h)return r.style.display="none",d=!0,!0}else"for"===e&&(d=!0)}),d||Array.from(r.children).forEach(function(t){e(t,!0)})}function t(e){d=d.map(function(t){let{element:n,type:r,preReferences:i,listener:c,action:o}=t;return n===e||e.contains(n)?("on"===r?i.forEach(function(e){n.removeEventListener(e,c)}):(g=g.map(function(e){return e.action===o?null:e}),h(g)),null):t}),h(d)}function n(e,t,n,i,c){const s={attr:"attributeName",class:"className",for:"itemName",on:"eventName"};let a={element:e,type:t,references:n},u=!1,p=!0;return c&&Object.assign(a,c),i&&(a.preReferences=i,s[t]&&(a[s[t]]=i)),"on"===t?r(a):("for"===t?a.originalHTML=e.innerHTML:"if"===t?p=!!l(f(n[0],a)):"rdo"===t&&d.some(function(t){"rdo"===t.type&&t.element===e&&(u=!0)}),o(a)),u||d.push(a),p}function r(e){let t=[];e.references.forEach(function(n){t.push(i(e,n))}),e.listener={handleEvent:function(e){t.forEach(function(t){t(e)})}},e.preReferences.forEach(function(t){e.element.addEventListener(t,e.listener)})}function i(e,t){let n;if("$update"===t)return c(e);if(-1!==t.indexOf("=")){const r=t.split("="),i=f(r[0],e),c=f(r[1],e);n=function(e){i.parent[i.target]=l(c)}}else{const r=f(t,e);n=function(t){r.parent[r.target].apply(Object.assign({event:t},e),r.args.map(function(t){let n=f(t,e);return n.parent[n.target]}))}}return n}function c(e){let t,n,{element:r}=e;if(r.hasAttribute("sd-attr")){let i,c="value";t=r.getAttribute("sd-attr"),"input"===r.tagName&&p(r.getAttribute("type")).oneOf(["checkbox","radio"])&&(c="checked"),i=t.indexOf(c),-1!==i&&(t=t.substring(i).split(":")[1],i=t.indexOf(";"),-1!==i&&(t=t.substring(0,i)),t=f(t,e),n=function(){t.parent[t.target]=r[c]})}else r.hasAttribute("sd-html")&&r.isContentEditable?(t=f(r.getAttribute("sd-html"),e),n=function(){t.parent[t.target]=r.innerHTML}):r.hasAttribute("sd-rdo")&&(t=f(r.getAttribute("sd-rdo"),e),n=function(){const e=Array.from(document.getElementsByName(r.getAttribute("name")));let n;e.some(function(e){if(e.checked)return n=e.value,!0}),t.parent[t.target]=n});return n}function o(e){const t=e.references[0].split(":").slice(1),n=a(e,t);e.action=n,g.push({action:n,directive:e,lastValue:!1}),m||(s(),m=!0)}function s(){g.forEach(function(e){const{action:t,directive:n,lastValue:r}=e,i=l(f(n.references[0],n));let c;if("object"==typeof i){try{c=JSON.stringify(i)}catch(e){console.log(e)}c&&c!==r&&(e.lastValue=c,t(i))}else i!==r&&(e.lastValue=i,t(i))}),setTimeout(s,200)}function a(n,r){const{type:i,element:c,preReferences:o}=n;let s;switch(i){case"if":s=function(n){n?(c.style.display=null,e(c)):(c.style.display="none",t(c))};break;case"for":s=function(r){c.children.length&&Array.from(c.children).forEach(function(e){t(e)}),c.innerHTML=n.originalHTML.repeat(r.length),c.children.length&&Array.from(c.children).forEach(function(t,i){const c={};c[n.preReferences[0]]=Object.assign({$collection:r,$index:i},r[i]),e(t,!0,c)})};break;case"html":s=function(n){c.children.length&&Array.from(c.children).forEach(function(e){t(e)}),c.innerHTML=n,c.children.length&&Array.from(c.children).forEach(function(t){e(t,!0)})};break;case"attr":s=function(e){o.forEach(function(t){void 0===e?c.hasAttribute(t)&&c.removeAttribute(t):c.setAttribute(t,e)})};break;case"rdo":s=function(e){const t=Array.from(document.getElementsByName(c.getAttribute("name")));t.forEach(function(t){t.value===e?t.checked=!0:t.checked=!1})};break;case"class":s=function(e){o.forEach(function(t){e?c.classList.contains(t)||c.classList.add(t):c.classList.contains(t)&&c.classList.remove(t)})}}return function(e){c.parentElement?("function"==typeof e&&(r=r.map(function(e){const t=f(e,n);return t.parent[t.target]}),e=e.apply(n,r)),s(e)):t(c)}}function f(e,t){const n={parent:{value:e},scope:t,target:"value"},r=-1!==e.indexOf("[");let i,c,o,s=e.split(":"),a=!1;if(e=s.shift(),i=-1!==e.indexOf("."),/[=<!>]/.test(e)){if(0!==e.indexOf("!")||/[=<!>]/.test(e.substring(1))){const r=e.match(/([=<!>]{2,3})/)[0];return p(r).oneOf(["==","===","!=","!==","<",">","<=",">="])?u(r,e,t):n}e=e.substring(1),a=!0}if(/[^a-z0-9.[\]$_]/i.test(e))return n;if(c=Object.assign({},window.simpleDirectives.root,t),r||i){if(r){for(;/\[[^\[\]]*\]/.test(e);)e=e.replace(/\[([^\[\]]*)\]/g,function(e,n){const r=f(n,t);return"."+r.parent[r.target]});i||(i=!0)}if(i){const t=e.split(".");t.some(function(n,r){if(r===t.length-1)o=n;else{if("object"!=typeof c||!c.hasOwnProperty(n))return c={value:e},o="value",!0;c=c[n]}})}}else{if(!c.hasOwnProperty(e))return n;o=e}return{args:s,bang:a,parent:c,scope:t,target:o}}function u(e,t,n){const r=t.split(e),i=l(f(r[0],n)),c=l(f(r[1],n));let o;switch(e){case"==":o=i==c;break;case"===":o=i===c;break;case"!=":case"!==":o=i!=c;break;case"<":o=i<c;break;case">":o=i>c;break;case"<=":o=i<=c;break;case">=":o=i>=c}return{parent:{value:o},scope:n,target:"value"}}function l({args:e,bang:t,parent:n,scope:r,target:i}){let c=n[i];return"function"==typeof c&&(c=c.apply(r,e.map(function(e){const t=f(e,r);return t.parent[t.target]}))),t?!c:c}function p(e){return{oneOf:function(t){return-1!==t.indexOf(e)}}}function h(e){let t;for(;-1!==(t=e.indexOf(null));)e.splice(t,1)}let d=[],g=[],m=!1;window.simpleDirectives={is:p,register:e,registry:d,removeNulls:h,root:window,unregister:t,watchers:g}})();