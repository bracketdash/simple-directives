(function(){var e,t=1,n=!1,r={attr:[],class:[],for:[],html:[],if:[],on:[]},a=function(e){var t,n=-1!==e.indexOf("["),r=-1!==e.indexOf(".");if(n||r||(t=window[e]),n){var i=function(e){return e=e.replace(/\[([^\[\]]*)\]/g,function(e,t){return"."+a(t)}),/\[[^\[\]]*\]/.test(e)?i(e):e};e=i(e),r||(r=!0)}return r&&e.split(".").forEach(function(e,n){t=n?"object"==typeof t&&t[e]?t[e]:"":window[e]}),t},i=function(e,t){var n;["attr","class","for","html","if","on"].forEach(function(t){if(r[t].length)if(e===document.body)"on"===t&&r.on.forEach(function(e){e.element.removeEventListener(e.eventName,e.listener)}),r[t].length=0;else if(r[t].map(function(t){return!e.contains(t.element)&&t}),-1!==r[t].indexOf(!1))for(;-1!==(n=r[t].indexOf(!1));)r[t].splice(n,1)})},l=function(s,o,c){var f=!1,u=!1;t||(t=1),i(s),["if","for","html","attr","class","on"].some(function(e){if(!s.hasAttribute("sd-"+e))return!1;var t;t=1!==["attr"].indexOf(e)&&-1!==s.getAttribute("sd-attr").indexOf(";")?s.getAttribute("sd-"+e).split(";"):[s.getAttribute("sd-"+e)],t.forEach(function(t){var n={element:s};if(-1!==["if","html"].indexOf(e))n.reference=t;else{switch(t=t.split(":"),e){case"attr":n.attributeName=t[0];break;case"class":n.className=t[0];break;case"for":n.itemName=t[0];break;case"on":n.eventName=t[0]}n.reference=t[1]}if("on"===e&&(n.listener=function(e){a(n.reference).call({element:s,event:e})},s.addEventListener(n.eventName,n.listener)),o)if(Array.isArray(o.value))n[o.itemName]={key:c,index:c,item:o.value[c],value:o.value[c]};else{var i=Object.keys(o.value)[c];n[o.itemName]={key:i,index:c,item:o.value[i],value:o.value[i]}}if(r[e].push(n),"if"===e){if(n.value=a(n.reference),!n.value)return s.style.display="none",f=!0,!0;s.style.display=null}else"for"===e&&(u=!0)})}),f||(u||(t+=s.children.length,Array.from(s.children).forEach(function(e){l(e)})),t-=1,t||n||e())};e=function(){var t;n=!0,["if","for","attr","class","html"].forEach(function(e){if(r[e].forEach(function(t,n){if(t.element.parentElement){var s=a(t.reference);if("function"==typeof s&&(s=s.call({})),-1!==["if","class"].indexOf(e)&&"boolean"!=typeof s&&(s=!!s),!t.value||t.value!==s)switch("for"===e&&(s=t.innerHTML.repeat(Array.isArray(t.value)?t.value.length:Object.keys(t.value).length)),t.value=s,e){case"if":s?(t.element.style.display=null,l(t.element)):(t.element.style.display="none",i(t.element,"if"));break;case"for":case"html":Array.from(t.element.children).forEach(function(e){i(e)}),t.element.innerHTML=s,Array.from(t.element.children).forEach(function(n,r){"for"===e?l(n,t,r):l(n)});break;case"attr":void 0===s?t.element.hasAttribute(t.attributeName)&&t.element.removeAttribute(t.attributeName):t.element.setAttribute(t.attributeName,s);break;case"class":s?t.element.classList.contains(t.className)||t.element.classList.add(t.className):t.element.classList.contains(t.className)&&t.element.classList.remove(t.className)}}else r[e][n]=!1}),-1!==r[e].indexOf(!1))for(;-1!==(t=r[e].indexOf(!1));)r[e].splice(t,1)}),setTimeout(e,window.directives.refreshRate)},"loading"!=document.readyState?l(document.body):document.addEventListener("DOMContentLoaded",function(){l(document.body)}),window.directives={refreshRate:100,register:function(){return l(document.body)},unregister:function(){return i(document.body)}}})();