(function(){function t(r,i,a){let s,c,o,f,u,l,g,d=!1;i||e(r),["if","attr","class","for","html","on","rdo"].some(function(t){if(c=`sd-${t}`,s=r.getAttribute(c),!s)return!1;if(o=s.replace(/\s+/,"").split(";"),p(t).oneOf(["attr","class","for","on"])?o.forEach(function(e){f=e.split(":"),u=f.shift().split(","),l=f.join(":").split(","),n(r,t,l,u,a)}):g=n(r,t,[o[0]],[],a),"if"===t){if(!g)return r.style.display="none",d=!0,!0}else"for"===t&&(d=!0)}),d||Array.from(r.children).forEach(function(e){t(e,!0)})}function e(t){d=d.map(function(e){let{element:n,type:r,preReferences:i,listener:a,action:s}=e;return n===t||t.contains(n)?("on"===r?i.forEach(function(t){n.removeEventListener(t,a)}):(m=m.map(function(t){return t.action===s?null:t}),g(m)),null):e}),g(d)}function n(t,e,n,i,a){const c={attr:"attributeName",class:"className",for:"itemName",on:"eventName"};let o={element:t,type:e,references:n},u=!1,p=!0;return a&&Object.assign(o,a),i&&(o.preReferences=i,c[e]&&(o[c[e]]=i)),"on"===e?r(o):("for"===e?o.originalHTML=t.innerHTML:"if"===e?p=!!l(f(n[0],o)):"rdo"===e&&d.some(function(e){"rdo"===e.type&&e.element===t&&(u=!0)}),s(o)),u||d.push(o),p}function r(t){let e=[];t.references.forEach(function(n){e.push(i(t,n))}),t.listener={handleEvent:function(t){e.forEach(function(e){e(t)})}},t.preReferences.forEach(function(e){t.element.addEventListener(e,t.listener)})}function i(t,e){let n;if("$update"===e)return a(t);if(-1!==e.indexOf("=")){const r=e.split("="),i=f(r[0],t),a=f(r[1],t);n=a.bang?function(){"function"==typeof a.parent[a.target]?i.parent[i.target]=!a.parent[a.target]():i.parent[i.target]=!a.parent[a.target]}:function(){"function"==typeof a.parent[a.target]?i.parent[i.target]=a.parent[a.target]():i.parent[i.target]=a.parent[a.target]}}else{const r=f(e,t);n=function(){r.parent[r.target].apply(t,r.args.map(function(e){let n=f(e,t);return n.parent[n.target]}))}}return n}function a(t){let e,n,{element:r}=t;if(r.hasAttribute("sd-attr")){let i,a="value";e=r.getAttribute("sd-attr"),"input"===r.tagName&&p(r.getAttribute("type")).oneOf(["checkbox","radio"])&&(a="checked"),i=e.indexOf(a),-1!==i&&(e=e.substring(i).split(":")[1],i=e.indexOf(";"),-1!==i&&(e=e.substring(0,i)),e=f(e,t),n=function(){e.parent[e.target]=r[a]})}else r.hasAttribute("sd-html")&&r.isContentEditable?(e=f(r.getAttribute("sd-html"),t),n=function(){e.parent[e.target]=r.innerHTML}):r.hasAttribute("sd-rdo")&&(e=f(r.getAttribute("sd-rdo"),t),n=function(){const t=Array.from(document.getElementsByName(r.getAttribute("name")));let n;t.some(function(t){if(t.checked)return n=t.value,!0}),e.parent[e.target]=n});return n}function s(t){const e=t.references[0].split(":").slice(1),n=o(t,e);t.action=n,m.push({action:n,directive:t,lastValue:!1}),h||(c(),h=!0)}function c(){m.forEach(function(t){const{action:e,directive:n,lastValue:r}=t,i=n.references[0].split(":"),a=i.shift(),s=l(f(a,n));s!==r&&(t.lastValue=s,e(s))}),setTimeout(c,200)}function o(n,r){const{type:i,element:a,preReferences:s}=n;let c;switch(i){case"if":c=function(n){n?(a.style.display=null,t(a)):(a.style.display="none",e(a))};break;case"for":case"html":c=function(t){a.children.length&&Array.from(a.children).forEach(function(t){e(t)}),a.innerHTML=t,a.children.length&&Array.from(a.children).forEach(function(t){e(t)})};break;case"attr":c=function(t){s.forEach(function(e){void 0===t?a.hasAttribute(e)&&a.removeAttribute(e):a.setAttribute(e,t)})};break;case"rdo":c=function(t){const e=Array.from(document.getElementsByName(a.getAttribute("name")));e.forEach(function(e){e.value===t?e.checked=!0:e.checked=!1})};break;case"class":c=function(t){if(s.length>1)s.forEach(function(e){t?a.classList.contains(e)||a.classList.add(e):a.classList.contains(e)&&a.classList.remove(e)});else{const e=s[0];t?a.classList.contains(e)||a.classList.add(e):a.classList.contains(e)&&a.classList.remove(e)}}}return function(t){a.parentElement?("function"==typeof t&&(r=r.map(function(t){const e=f(t,n);return e.parent[e.target]}),t=t.apply(n,r)),c(t)):e(a)}}function f(t,e){const n={parent:{value:t},scope:e,target:"value"},r=-1!==t.indexOf("[");let i,a,s,c=t.split(":"),o=!1;if(t=c.shift(),i=-1!==t.indexOf("."),/[=<!>]/.test(t)){if(0!==t.indexOf("!")||/[=<!>]/.test(t.substring(1))){const r=t.match(/([=<!>]{2,3})/)[0];return p(r).oneOf(["==","===","!=","!==","<",">","<=",">="])?u(r,t,e):n}t=t.substring(1),o=!0}if(/[^a-z0-9.[\]$_]/i.test(t))return n;if(a=Object.assign({},window.simpleDirectives.root,e),r||i){if(r){for(;/\[[^\[\]]*\]/.test(t);)t=t.replace(/\[([^\[\]]*)\]/g,function(t,n){const r=f(n,e);return"."+r.parent[r.target]});i||(i=!0)}if(i){const e=t.split(".");e.some(function(n,r){if(r===e.length-1)s=n;else{if("object"!=typeof a||!a.hasOwnProperty(n))return a={value:t},s="value",!0;a=a[n]}})}}else{if(!a.hasOwnProperty(t))return n;s=t}return{args:c,bang:o,parent:a,scope:e,target:s}}function u(t,e,n){const r=e.split(t),i=l(f(r[0],n)),a=l(f(r[1],n));let s;switch(t){case"==":s=i==a;break;case"===":s=i===a;break;case"!=":case"!==":s=i!=a;break;case"<":s=i<a;break;case">":s=i>a;break;case"<=":s=i<=a;break;case">=":s=i>=a}return{parent:{value:s},scope:n,target:"value"}}function l({args:t,bang:e,parent:n,scope:r,target:i}){let a=n[i];return"function"==typeof a&&(a=a.apply(r,t.map(function(t){const e=f(t,r);return e.parent[e.target]}))),e?!a:a}function p(t){return{oneOf:function(e){return-1!==e.indexOf(t)}}}function g(t){let e;for(;-1!==(e=t.indexOf(null));)t.splice(e,1)}let d=[],m=[],h=!1;window.simpleDirectives={is:p,register:t,registry:d,removeNulls:g,root:window,unregister:e,watchers:m}})();